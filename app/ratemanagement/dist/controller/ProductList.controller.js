sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ui/core/Fragment"],(e,t,o)=>{"use strict";return e.extend("rwt.etp.ratemanagement.controller.ProductList",{onInit(){this._oView=this.getView();this._ServerModel=this.getOwnerComponent().getModel()},onAddNewPrs:function(){var e=this.getView();if(!this.byId("newRowDialog")){this.loadFragment({name:"rwt.etp.ratemanagement.fragment.AddProduct"}).then(function(t){e.addDependent(t);t.open()}.bind(this))}else{this.byId("newRowDialog").open()}},onSaveNewRow:function(){var e=this.getView();var o=this.byId("productCodeInput").getValue();var n=this.byId("productNameInput").getValue();var i=this.byId("packagingQtyInput").getValue();var s=this.byId("unitInput").getValue();var a=this.byId("costPriceInput").getValue();var r=this.byId("landingPriceInput").getValue();var c=this.byId("sellingPriceInput").getValue();var d={ProductCode:o,Product:n,Packaging_Qty:i,Unit:s,Cost_Price:a,Landing_Price:r,Selling_Price:c};var g=this.byId("idTable");var u=g.getBinding("items");var l=u.create(d);l.created().then(function(){t.show("New Product Added");e.byId("newRowDialog").close()},function(e){if(!e.canceled){throw e}})},onCancelNewRow:function(){this.byId("newRowDialog").close()},onRowEdit:function(e){var t=e.getSource().getParent();var o=t.getCells();o.forEach(function(e){if(e.isA("sap.m.Input")){e.setEditable(true)}});e.getSource().setIcon("sap-icon://save");e.getSource().setTooltip("Save Changes");e.getSource().detachPress(this.onRowEdit);e.getSource().attachPress(this.onRowSave,this)},onRowSave:function(e){var o=e.getSource().getParent();var n=o.getCells();n.forEach(function(e){if(e.isA("sap.m.Input")){e.setEditable(false)}});e.getSource().setIcon("sap-icon://edit");e.getSource().setTooltip("Edit Row");e.getSource().detachPress(this.onRowSave);e.getSource().attachPress(this.onRowEdit,this);var i=o.getBindingContext();this._ServerModel.submitBatch("updateGroup").then(function(){t.show("Changes saved successfully!")}).catch(function(e){t.show("Failed to save changes.");console.error(e)})},onSavePrs:function(){var e=this.getView().getModel();var o=e.getProperty("/Products");t.show("All changes saved!")},onDelRow:function(e){const t=e.getSource();const o=t.getBindingContext("InvoiceModel");if(o){const e=o.getPath();const t=this.getView().getModel("InvoiceModel");const n=t.getProperty("/");const i=parseInt(e.split("/").pop());n.splice(i,1);t.setProperty("/",n);sap.m.MessageToast.show("Row deleted successfully")}}})});
//# sourceMappingURL=ProductList.controller.js.map