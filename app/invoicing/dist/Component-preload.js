//@ui5-bundle rwt/etp/invoicing/Component-preload.js
sap.ui.require.preload({
	"rwt/etp/invoicing/Component.js":function(){
sap.ui.define(["sap/ui/core/UIComponent","rwt/etp/invoicing/model/models"],(e,t)=>{"use strict";return e.extend("rwt.etp.invoicing.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(t.createDeviceModel(),"device");this.getRouter().initialize()}})});
},
	"rwt/etp/invoicing/controller/App.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("rwt.etp.invoicing.controller.App",{onInit(){}})});
},
	"rwt/etp/invoicing/controller/CreateInvoice.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ui/model/Filter","sap/ui/export/library","sap/ui/export/Spreadsheet"],(e,t,o,r,i)=>{"use strict";var s=r.EdmType;return e.extend("rwt.etp.invoicing.controller.CreateInvoice",{onInit:function(){this._oView=this.getView();this._ProductData=this.getOwnerComponent().getModel("ProductModel");this._ServerModel=this.getOwnerComponent().getModel();this._ProductData.setSizeLimit(1e3);this._ServerModel.setSizeLimit(1e3);this._ProdctsCtx=this._ServerModel.bindList("/Products");this._ProdctsCtx.requestContexts(0,1e3).then(function(e){let t=e.map(function(e){e.getObject().Selling_Price=parseInt(e.getObject().Selling_Price);e.getObject().Cost_Price=parseInt(e.getObject().Cost_Price);e.getObject().Available_Qty=parseInt(e.getObject().Available_Qty);return e.getObject()});this._ProductData.setData(t)}.bind(this)).catch(function(e){console.error("Error while fetching from server OData:",e)})},onSuggestionItemSelected:function(e){let t=e.getParameter("selectedItem");if(t){let o=t.getKey().split("--");let r=this._ProductData.getProperty("/");let i=r.find(e=>e.ProductCode===o[0]&&e.Packaging_Qty==o[1]);let s=this._oView.getModel("InvoiceModel");let n=s.getProperty("/");if(!Array.isArray(n)){n=[]}i.Sell_Qty=1;i.TotalPrice=i.Selling_Price;n.push(i);s.setProperty("/",n);s.updateBindings();e.getSource().setValue()}},updateSP:function(e){let t=e.getSource().getParent();let o=t.getBindingContextPath();let r=this.getView().getModel("InvoiceModel");let i=t.getAggregation("cells")[5].getValue();r.setProperty(`${o}/Selling_Price`,parseInt(i));let s=t.getAggregation("cells")[3].getValue();r.setProperty(`${o}/Sell_Qty`,s);let n=r.getProperty(`${o}/Selling_Price`);let l=r.setProperty(`${o}/TotalPrice`,parseInt(n)*s);r.refresh(true)},onTblUpdateFinsh:function(e){const t=this.byId("idTable");const o=t.getItems();let r=0;let i=0;o.forEach(e=>{const t=e.getBindingContext("InvoiceModel");if(t){const e=parseFloat(t.getProperty("TotalPrice"))||0;r+=e}});this.byId("idTotlVal").setText(r.toFixed(2))},onDelRow:function(e){const t=e.getSource();const o=t.getBindingContext("InvoiceModel");if(o){const e=o.getPath();const t=this.getView().getModel("InvoiceModel");const r=t.getProperty("/");const i=parseInt(e.split("/").pop());r.splice(i,1);t.setProperty("/",r);sap.m.MessageToast.show("Row deleted successfully")}},onResetPrs:function(){this.getView().getModel("InvoiceModel").setData().refresh(true)},onSaveInvoice:async function(){debugger;const e=this.getView().getModel("InvoiceModel").getProperty("/");const t=this._ServerModel;const o="invoiceStockUpdate";for(const r of e){const e=r.ProductCode;const i=r.Packaging_Qty;const s=`/Products(ProductCode='${e}',Packaging_Qty=${i})`;const n=t.bindContext(s,null,{$$updateGroupId:o});try{const e=r.Available_Qty-r.Sell_Qty;if(e<0){sap.m.MessageBox.error(`Not enough stock for ${r.Product}`);continue}const t=n.getBoundContext();t.setProperty("Available_Qty",e)}catch(e){console.error(`Error processing ${r.Product}:`,e);sap.m.MessageBox.error(`Error processing ${r.Product}: ${e.message}`)}}try{await t.submitBatch(o);sap.m.MessageToast.show("Invoice saved and stock updated!")}catch(e){console.error("Batch submission failed:",e);sap.m.MessageToast.show("Failed to update stock.")}},createColumnConfig:function(){var e=[];e.push({label:"Product",property:"Product",type:s.String,width:50});e.push({label:"Product Code",type:s.String,property:"ProductCode"});e.push({property:["Packaging_Qty","Unit"],label:"Packing",type:s.String,width:10,template:"{0} {1}"});e.push({label:"Cost Price",property:"Cost_Price",type:s.Number,width:15});e.push({label:"Selling Price (incl. GST)",property:"Selling_Price",type:s.Number,scale:2,width:15});e.push({label:"Quantity",property:"Sell_Qty",type:s.Number,scale:2,width:15});e.push({label:"Total",property:"TotalPrice",type:s.Number,scale:2,width:15});return e},onPrntPrs:function(){let e=this.byId("idCustmrNm").getValue();this.onSaveInvoice();if(!e){t.show("Enter Customer Name");return}const o=new Date;let r=this.byId("idTable");let s=r.getModel("InvoiceModel");let n=s.getProperty("/");const l=String(o.getDate()).padStart(2,"0");const c=String(o.getMonth()+1).padStart(2,"0");const a=String(o.getFullYear()).slice(-2);const d=`${l}${c}${a}`;e+="_"+d+"_"+this.byId("idTotlVal").getText();var g,p,u,h;p=r.getBinding("items");g=this.createColumnConfig();u={workbook:{context:{application:"Supplier Invoices List",version:"6.1.0-SNAPSHOT",title:"Supplier Invoices",modifiedBy:"Rawat Enterprises",sheetName:"Invoices"},columns:g,hierarchyLevel:"Level"},dataSource:p,fileName:e+".xlsx",worker:false};h=new i(u);h.build().finally(function(){h.destroy()})}})});
},
	"rwt/etp/invoicing/i18n/i18n.properties":'# This is the resource bundle for rwt.etp.invoicing\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=App for billing\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n#XTIT: Main view title\ntitle=App for billing',
	"rwt/etp/invoicing/manifest.json":'{"_version":"1.65.0","sap.app":{"id":"rwt.etp.invoicing","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.15.7","toolsId":"ec125e57-a048-483b-b7fc-6e204e1257ec"},"dataSources":{"mainService":{"uri":"odata/v4/catalog/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"stockmanagement-display":{"semanticObject":"stockmanagement","action":"display","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.131.1","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"rwt.etp.invoicing.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}},"InvoiceModel":{"type":"sap.ui.model.json.JSONModel"},"ProductModel":{"type":"sap.ui.model.json.JSONModel"}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"rwt.etp.invoicing.view"},"routes":[{"name":"RouteCreateInvoice","pattern":":?query:","target":["TargetCreateInvoice"]}],"targets":{"TargetCreateInvoice":{"id":"CreateInvoice","name":"CreateInvoice"}}},"rootView":{"viewName":"rwt.etp.invoicing.view.App","type":"XML","id":"App"}},"sap.cloud":{"public":true,"service":"RawatEnterprises.service"}}',
	"rwt/etp/invoicing/model/models.js":function(){
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"rwt/etp/invoicing/view/App.view.xml":'<mvc:View controllerName="rwt.etp.invoicing.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"rwt/etp/invoicing/view/CreateInvoice.view.xml":'<mvc:View controllerName="rwt.etp.invoicing.controller.CreateInvoice"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:core="sap.ui.core"\n    xmlns="sap.m"><Page\n            id="page"\n            title="{i18n>title}"\n            showFooter="true"><content><HBox id="idHeadr" justifyContent="SpaceAround" width="100%" ><HBox id="idCstNm" alignItems="Center" justifyContent="Center" width="33%"><Text id="idTextCst" text="Customer Name : "></Text><Input id="idCustmrNm" placeholder="Enter customer name"></Input></HBox><HBox id="idCstCnt" alignItems="Center" justifyContent="Center" width="33%"><Text id="idTextPn" text="Phone Number : "></Text><Input id="idIntPn" placeholder="Enter customer Phone number"></Input></HBox><HBox id="idCstAdr" alignItems="Center" justifyContent="Center" width="33%"><Text id="idTextAdr" text="Address : "></Text><Input id="idIntAdr" placeholder="Enter customer Address"></Input></HBox></HBox><core:HTML id="_IDGenHTML1" content="&lt;hr style=\'width:100%; border:1px solid #ccc; margin:10px 0;\' /&gt;" /><Table id="idTable" sticky="ColumnHeaders" items="{path:\'InvoiceModel>/\'}" updateFinished="onTblUpdateFinsh" backgroundDesign="Solid" class="sapUiMediumMarginBegin sapUiMediumMarginEnd"><headerToolbar><OverflowToolbar id="_IDGenOverflowToolbar" ><Input\n                            id="idItemSearch"\n                            width="100%"\n                            placeholder="Search for products..."\n                            showSuggestion="true"\n                            submit="onAddItmPrs"\n                            suggestionItemSelected="onSuggestionItemSelected"\n                            suggestionItems="{\n                            path: \'/Products\',\n                            templateShareable: false\n                            }"><suggestionItems><core:Item id="_IDGenItem" text="{Product} {ProductCode}-{Packaging_Qty}{Unit}"  key="{ProductCode}--{Packaging_Qty}"/></suggestionItems></Input></OverflowToolbar></headerToolbar><columns><Column id="_IDGenColumn"><Text width="80%"\n                                id="idTxtPrd"\n                                text="Product"\n                            /></Column><Column id="_IDGenColumn1" demandPopin="true"><Text\n                                id="idTxtPrdDesc"\n                                text="Description"\n                            /></Column><Column id="_IDGenColumn2" ><Text id="idQty" text="Packing" ></Text></Column><Column id="_IDGenColumn7"><Text\n                                id="idBillQty"\n                                text="Billing Qty"\n                            /></Column><Column id="_IDGenColumn3"><Text\n                                id="idCP"\n                                text="Cost Price"\n                            /></Column><Column id="_IDGenColumn4"><Text\n                                id="idSP"\n                                text="Selling Price"\n                            /></Column><Column id="_IDTotalRateCol"><Text id="_IDTotalRateText" text="Total" /></Column><Column id="_IDGenColumn8"><Text id="_IDGenText" text="Delete" /></Column></columns><items><ColumnListItem id="_IDGenColumnListItem"><cells><Text id="_IDGenText1" text="{InvoiceModel>Product}" /><Text id="_IDGenText2" text="{InvoiceModel>ProductCode}" /><Text id="_IDGenText3" text="{InvoiceModel>Packaging_Qty} {InvoiceModel>Unit} "></Text><StepInput step="1"  id="idStpQty" min="0.5" value="{InvoiceModel>Sell_Qty}" change="updateSP" width="50%" displayValuePrecision="1"></StepInput><Text id="_IDGenText4" text="{InvoiceModel>Cost_Price}" /><Input id="_IDGenText5" value="{InvoiceModel>Selling_Price}" liveChange="updateSP"/><Text id="_IdTotalRate" text="{InvoiceModel>TotalPrice}" /><Button id="_IDGenButton" icon="sap-icon://delete" press="onDelRow" type="Transparent" tooltip="Delete Row"/></cells></ColumnListItem></items></Table></content><footer><OverflowToolbar id="_IDGenOverflowToolbar1"><Button id="_IDResetBtn"\n                        type="Accept"\n                        text="Reset/Clear"\n                        press="onResetPrs"\n                    /><ToolbarSpacer id="_IDGenToolbarSpacer" /><Text id="_IDGenText8" text="Total bill:"></Text><Text id="idTotlVal" text="" class="--sapFontHeader1Size" ></Text><Toolbar id="_IDGenToolbar" ></Toolbar><Button id="_IDGenButton1"\n                        type="Accept"\n                        text="Print"\n                        press="onPrntPrs"\n                    /></OverflowToolbar></footer></Page></mvc:View>'
});
//# sourceMappingURL=Component-preload.js.map
